# Maintainer: Shrinivas Vishnu Kumbhar <shrinivas.v.kumbhar@gmail.com>

pkgname=plasma-setup-git
_pkgname=plasma-setup
pkgver=0.1.0
pkgrel=1
pkgdesc="Initial setup wizard for KDE Plasma (git version, pinned commit)"
arch=('x86_64')
url="https://invent.kde.org/plasma/plasma-setup"
license=('BSD-2-Clause')

_commit=3cbe755150d3b9aaab72649c1ccbf74686064e95  # <-- replace with desired commit

depends=(
  'gcc-libs'
  'glibc'
  'qt6-base'
  'qt6-declarative'
  'qt6-svg'
  'kauth'
  'kcoreaddons'
  'ki18n'
  'kpackage'
  'kconfig'
  'kscreen'
  'kwindowsystem'
  'plasma-workspace'
  'plasma-desktop'
)

makedepends=(
  'git'
  'cmake'
  'extra-cmake-modules'
  'pkgconf'
  'gettext'
)

conflicts=('plasma-setup')
provides=('plasma-setup')

source=(
  "${_pkgname}::git+${url}.git#commit=${_commit}"
)

sha256sums=('SKIP')

build() {
  cd "${srcdir}/${_pkgname}"

  cmake -B build \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr

  cmake --build build
}

package() {
  cd "${srcdir}/${_pkgname}"

  DESTDIR="${pkgdir}" cmake --install build

  install -Dm644 LICENSES/BSD-2-Clause.txt \
    "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}

# vim: ts=2 sw=2 et:

